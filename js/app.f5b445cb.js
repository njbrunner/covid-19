(function(e){function t(t){for(var a,s,r=t[0],c=t[1],l=t[2],h=0,d=[];h<r.length;h++)s=r[h],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},o={app:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/neighbor/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"01ea":function(e,t,n){},"034f":function(e,t,n){"use strict";var a=n("8a23"),o=n.n(a);o.a},"07ff":function(e,t,n){"use strict";var a=n("d504"),o=n.n(a);o.a},"0e6f":function(e,t,n){},1:function(e,t){},"17b6":function(e,t,n){},2:function(e,t){},2941:function(e,t,n){"use strict";var a=n("d86d"),o=n.n(a);o.a},3:function(e,t){},4:function(e,t){},4230:function(e,t,n){},"48f1":function(e,t,n){"use strict";var a=n("0e6f"),o=n.n(a);o.a},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"background-color"},[n("Header",{attrs:{user:e.user}}),n("v-content",[n("v-container",[n("router-view",{attrs:{user:e.user}})],1)],1)],1)},i=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isLoggedIn?a("v-app-bar",{ref:"appBar",attrs:{app:"",light:"",id:"appBar"}},[a("img",{staticClass:"mr-3 pointer",attrs:{src:n("b223"),height:"50"},on:{click:e.goHome}}),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:e.goToChat}},[a("v-badge",{attrs:{content:e.newInvitations,value:e.newInvitations,overlap:""}},[a("v-icon",{staticClass:"primary--text"},[e._v(" mdi-chat-outline ")])],1)],1),a("v-menu",{attrs:{"open-on-hover":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{icon:""}},n),[a("v-icon",{staticClass:"primary--text"},[e._v("mdi-account-outline")])],1)]}}],null,!1,2237835868)},[a("v-list",[a("v-list-item",{on:{click:e.logout}},[a("v-list-item-title",[e._v("Logout")])],1)],1)],1)],1):e._e()},r=[],c={name:"Header",props:{user:Object},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push({name:"Login"})},goHome:function(){this.$router.push({name:"Home"})},goToChat:function(){this.$router.push({name:"Chat"})}},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},newInvitations:function(){return this.$store.getters.getNewInvitations.length}}},l=c,u=(n("8baf"),n("2877")),h=n("6544"),d=n.n(h),p=n("40dc"),f=n("4ca6"),m=n("8336"),g=n("132d"),v=n("8860"),b=n("da13"),C=n("5d23"),w=n("e449"),y=n("2fa4"),k=Object(u["a"])(l,s,r,!1,null,null,null),N=k.exports;d()(k,{VAppBar:p["a"],VBadge:f["a"],VBtn:m["a"],VIcon:g["a"],VList:v["a"],VListItem:b["a"],VListItemTitle:C["b"],VMenu:w["a"],VSpacer:y["a"]});var x={name:"App",components:{Header:N},computed:{user:function(){return this.$store.getters.getUser}}},_=x,I=(n("034f"),n("7496")),O=n("a523"),P=n("a75b"),T=Object(u["a"])(_,o,i,!1,null,null,null),j=T.exports;d()(T,{VApp:I["a"],VContainer:O["a"],VContent:P["a"]});n("45fc");var S=n("8c4f"),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("v-container",{staticClass:"potential-neighbors-container"},[n("h1",{staticClass:"primary--text"},[e._v("Potential Neighbors")]),n("hr"),e._l(e.potentialNeighbors,(function(t,a){return n("PotentialNeighbor",{key:a,attrs:{potentialNeighbor:t,user:e.user},on:{onCreateChat:e.onCreateChat}})}))],2)],1)},E=[],A=(n("a15b"),n("b0c0"),n("bc3a")),V=n.n(A),U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"potential-neighbor-card"},[n("h4",{staticClass:"card-name"},[e._v(e._s(e.potentialNeighbor.name))]),n("v-btn",{staticClass:"button-chat",attrs:{color:"primary",rounded:"",outlined:""},on:{click:e.createChat}},[e._v(" Chat ")])],1)},q=[],F={name:"PotentialNeighbor",props:{potentialNeighbor:Object,user:Object},computed:{uniqueChannelName:function(){return this.user.id<this.potentialNeighbor.id?this.user.id+"_"+this.potentialNeighbor.id:this.potentialNeighbor.id+"_"+this.user.id}},methods:{createChat:function(){this.$emit("onCreateChat",{uniqueChannelName:this.uniqueChannelName,potentialNeighborUniqueIdentity:this.potentialNeighbor.id,potentialNeighborName:this.potentialNeighbor.name})}}},L=F,B=(n("07ff"),Object(u["a"])(L,U,q,!1,null,null,null)),$=B.exports;d()(B,{VBtn:m["a"]});var R={name:"Home",components:{PotentialNeighbor:$},props:{user:Object},computed:{potentialNeighbors:function(){return this.$store.getters.getPotentialNeighbors},chatClient:function(){return this.$store.getters.getChatClient}},watch:{user:function(){this.user.location_identified&&this.$store.dispatch("fetchPotentialNeighbors")}},methods:{onCreateChat:function(e){this.doesChannelExist(e)},doesChannelExist:function(e){var t=this;this.chatClient.getChannelByUniqueName(e.uniqueChannelName).then((function(e){t.joinChannel(e)})).catch((function(){t.createChannel(e)}))},joinChannel:function(e,t){var n=this;e.join().then((function(){e.invite(t).then((function(){n.addPotentialNeighborToNeighbors(t),n.$router.push({name:"Chat"})}))}))},createChannel:function(e){var t=this;this.chatClient.createChannel({uniqueName:e.uniqueChannelName,attributes:{displayNames:[this.user.name,e.potentialNeighborName]}}).then((function(n){t.joinChannel(n,e.potentialNeighborUniqueIdentity)}))},addPotentialNeighborToNeighbors:function(e){V()({url:"https://covid-19-hackathon-app.herokuapp.com/user/add_neighbor/"+this.user.id,data:{neighbor_id:e},method:"PUT"})},getlocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.successLocation,this.errorLocation):(console.log("Geolocation is not supported by your browser"),this.$toasted.show("Geolocation is not supported by your browser"))},successLocation:function(e){var t=this,n={userId:this.user.id,latitude:e.coords.latitude,longitude:e.coords.longitude};this.$store.dispatch("updateLocation",n).then((function(e){t.$store.dispatch("updateUser",e.data)})).catch((function(e){console.log(e),t.$toasted.show(e.message)}))},errorLocation:function(e){e.code==e.PERMISSION_DENIED?(alert("This application needs to access your location data in order to pair you with other users that either need help or can provide help. We will not share your location with anyone.\n\nPlease enable Location Permissions in your browser before selecting OK."),this.getlocation()):this.$toasted.show("Unable to retrieve your location")},checkLocation:function(){this.user.location_identified||this.getlocation()}},created:function(){this.user.location_identified?this.$store.dispatch("fetchPotentialNeighbors"):this.getlocation(),this.$store.dispatch("createChatClient",this.user.twilio_token)},beforeUpdate:function(){this.checkLocation()}},D=R,H=(n("cccb"),Object(u["a"])(D,M,E,!1,null,null,null)),G=H.exports;d()(H,{VContainer:O["a"]});var Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("FormContainer",[n(e.loginForm,{tag:"component"})],1)],1)},Q=[],J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"vertical-horizontal-center"},[a("v-row",{staticClass:"container-login"},[a("v-col",{staticClass:"container-logo"},[a("img",{staticClass:"logo",attrs:{src:n("b223"),height:"50",width:"150","aspect-ratio":"3"}})]),a("v-col",{staticClass:"container-form"},[e._t("default")],2)],1)],1)},W=[],X={name:"FormContainer"},K=X,Y=(n("2941"),n("62ad")),z=n("0fd9"),ee=Object(u["a"])(K,J,W,!1,null,null,null),te=ee.exports;d()(ee,{VCol:Y["a"],VContainer:O["a"],VRow:z["a"]});var ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",{staticClass:"primary--text"},[e._v("Login")]),n("v-form",{staticClass:"form-style"},[n("v-text-field",{attrs:{label:"E-mail","prepend-inner-icon":"mdi-email-outline",outlined:"",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{label:"Password","prepend-inner-icon":"mdi-lock-outline",outlined:"",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.login}},[e._v("Login")])],1),n("p",[e._v("Not a user? "),n("router-link",{staticClass:"link-login",attrs:{to:"/signup"}},[e._v("Sign up.")])],1)],1)},ae=[],oe={name:"LoginForm",data:function(){return{email:void 0,password:void 0}},methods:{login:function(){var e=this,t={email:this.email,password:this.password};this.$store.dispatch("login",t).then((function(){e.$router.push({name:"Home"})})).catch((function(t){e.$toasted.show(t)}))}}},ie=oe,se=(n("c463"),n("4bd4")),re=n("8654"),ce=Object(u["a"])(ie,ne,ae,!1,null,null,null),le=ce.exports;d()(ce,{VBtn:m["a"],VForm:se["a"],VTextField:re["a"]});var ue={name:"Login",components:{FormContainer:te,LoginForm:le},data:function(){return{loginForm:"LoginForm"}}},he=ue,de=Object(u["a"])(he,Z,Q,!1,null,null,null),pe=de.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("FormContainer",[n(e.signupForm,{tag:"component"})],1)],1)},me=[],ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",{staticClass:"primary--text"},[e._v("Sign Up")]),n("v-form",{staticClass:"form-style"},[n("v-text-field",{attrs:{label:"Name","prepend-inner-icon":"mdi-account-outline",outlined:"",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-text-field",{attrs:{label:"E-mail","prepend-inner-icon":"mdi-email-outline",outlined:"",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{label:"Password","prepend-inner-icon":"mdi-lock-outline",outlined:"",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-text-field",{attrs:{label:"Confirm Password","prepend-inner-icon":"mdi-lock-outline",outlined:"",required:""},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}}),n("v-select",{attrs:{items:e.roles,label:"How would you like to participate?","prepend-inner-icon":"mdi-form-select",outlined:"",color:"primary","item-text":"label","item-value":"id"},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}}),n("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.signupUser}},[e._v("Sign Up")])],1),n("p",[e._v("Already a user? "),n("router-link",{staticClass:"link-signup",attrs:{to:"/login"}},[e._v("Login.")])],1)],1)},ve=[],be={name:"SignupForm",data:function(){return{name:void 0,email:void 0,password:void 0,confirmPassword:void 0,role:void 0}},computed:{roles:function(){return this.$store.getters.getRoles}},methods:{signupUser:function(){var e=this,t={name:this.name,email:this.email,password:this.password,role:{id:this.role}};this.$store.dispatch("signup",t).then((function(){e.$router.push({name:"Home"})})).catch((function(t){e.$toasted.show(t),console.log(t)}))}},created:function(){this.$store.dispatch("getRoles")}},Ce=be,we=(n("8bab"),n("b974")),ye=Object(u["a"])(Ce,ge,ve,!1,null,null,null),ke=ye.exports;d()(ye,{VBtn:m["a"],VForm:se["a"],VSelect:we["a"],VTextField:re["a"]});var Ne={name:"Signup",components:{FormContainer:te,SignupForm:ke},data:function(){return{signupForm:"SignupForm"}}},xe=Ne,_e=Object(u["a"])(xe,fe,me,!1,null,null,null),Ie=_e.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-row",[n("v-col",{attrs:{cols:3}},[n("ChatSidebar",{attrs:{channels:e.channels,user:e.user},on:{onSelectedChannel:e.onSelectedChannel}})],1),n("v-col",{attrs:{cols:9}},[n("MessageContainer",{attrs:{user:e.user,selectedChannel:e.selectedChannel,selectedChannelDisplayName:e.selectedChannelDisplayName}})],1)],1)],1)},Pe=[],Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar"},[n("div",{staticClass:"channel-container"},e._l(e.channels,(function(t,a){return n("Channel",{key:a,attrs:{channel:t,user:e.user,selectedChannel:e.selectedChannel},on:{onSelectedChannel:e.onSelectedChannel}})})),1),n("div",{staticClass:"sidebar-spacer"})])},je=[],Se=(n("caad"),n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel-wrapper",class:{activeChannel:e.isActiveChannel},on:{click:e.selectChannel}},[n("div",{staticClass:"channel",class:{newChannel:e.isNewChannel}},[e._v(e._s(e.channelDisplayName)+" ")])])}),Me=[],Ee={name:"Channel",props:{channel:Object,user:Object,selectedChannel:Object},computed:{channelDisplayName:function(){var e=this.channel.attributes.displayNames;return e[0]==this.user.name?e[1]:e[0]},newInvitations:function(){return this.$store.getters.getNewInvitations},isNewChannel:function(){return this.newInvitations.includes(this.channel.uniqueName)},isActiveChannel:function(){return!!this.selectedChannel&&this.selectedChannel==this.channel}},methods:{selectChannel:function(){this.$emit("onSelectedChannel",this.channel)}}},Ae=Ee,Ve=(n("b25e"),Object(u["a"])(Ae,Se,Me,!1,null,null,null)),Ue=Ve.exports,qe={name:"ChatSidebar",components:{Channel:Ue},props:{channels:Array,user:Object},watch:{channels:function(){void 0!=this.channels&&void 0==this.selectedChannel&&this.onSelectedChannel(this.channels[0])}},data:function(){return{selectedChannel:void 0}},computed:{newInvitations:function(){return this.$store.getters.getNewInvitations}},methods:{onSelectedChannel:function(e){this.newInvitations.includes(e.uniqueName)&&this.$store.commit("removeNewInvitation",e.uniqueName);var t={channel:e,channelDisplayName:this.channelDisplayName(e)};this.selectedChannel=e,this.$emit("onSelectedChannel",t)},channelDisplayName:function(e){var t=e.attributes.displayNames;return t[0]==this.user.name?t[1]:t[0]}}},Fe=qe,Le=(n("9a81"),Object(u["a"])(Fe,Te,je,!1,null,null,null)),Be=Le.exports,$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.selectedChannel?n("v-container",{staticClass:"message-container"},[n("h1",[e._v(e._s(e.selectedChannelDisplayName))]),n("hr"),n("div",{ref:"messageBody",staticClass:"messages"},e._l(e.messages,(function(t,a){return n("Message",{key:a,attrs:{message:t,user:e.user}})})),1),n("InputContainer",{on:{sendMessage:e.sendMessage}})],1):e._e()},Re=[],De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{ref:"inputContainer",staticClass:"input-container-background",attrs:{id:"inputContainer"}},[n("v-layout",{staticClass:"input-container"},[n("div",{staticClass:"input"},[n("v-text-field",{attrs:{label:"Message",outlined:"",rounded:"",solo:"",color:"primary"},model:{value:e.messageText,callback:function(t){e.messageText=t},expression:"messageText"}})],1),n("div",{staticClass:"button-send"},[n("v-btn",{attrs:{fab:""},on:{click:e.sendMessage}},[n("v-icon",{staticClass:"primary--text"},[e._v("mdi-send")])],1)],1)])],1)},He=[],Ge={name:"InputContainer",data:function(){return{messageText:void 0}},methods:{sendMessage:function(){this.$emit("sendMessage",this.messageText),this.messageText=void 0}}},Ze=Ge,Qe=(n("48f1"),n("a722")),Je=Object(u["a"])(Ze,De,He,!1,null,null,null),We=Je.exports;d()(Je,{VBtn:m["a"],VContainer:O["a"],VIcon:g["a"],VLayout:Qe["a"],VTextField:re["a"]});var Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"message",class:e.isMessageOwned?"message-owned":"message-not-owned"},[n("p",{staticClass:"message-timestamp"},[e._v(e._s(e.message.timestamp))]),n("div",{staticClass:"message-text-container"},[n("p",{staticClass:"message-text add-shadow"},[e._v(e._s(e.message.body))])])])])},Ke=[],Ye={name:"Message",props:{message:Object,user:Object},computed:{isMessageOwned:function(){return this.message.author==this.user.id}}},ze=Ye,et=(n("8254"),Object(u["a"])(ze,Xe,Ke,!1,null,null,null)),tt=et.exports,nt={name:"MessageContainer",components:{InputContainer:We,Message:tt},props:{selectedChannel:Object,selectedChannelDisplayName:String,user:Object},data:function(){return{messages:void 0}},watch:{selectedChannel:function(){this.selectedChannel&&this.getChannelMessages()}},methods:{sendMessage:function(e){var t=this;this.selectedChannel.sendMessage(e).then((function(){t.getChannelMessages()}))},getChannelMessages:function(){var e=this;this.selectedChannel.getMessages().then((function(t){e.messages=t.items,e.subscribeToNewMessages(),e.scrollToBottom()}))},subscribeToNewMessages:function(){var e=this;this.selectedChannel.on("messageAdded",(function(t){e.messages.push(t)}))},scrollToBottom:function(){var e=this.$refs.messageBody;e.scrollTop=1e3}}},at=nt,ot=(n("da83"),Object(u["a"])(at,$e,Re,!1,null,null,null)),it=ot.exports;d()(ot,{VContainer:O["a"]});var st={name:"Chat",props:{user:Object},components:{ChatSidebar:Be,MessageContainer:it},data:function(){return{channels:void 0,selectedChannel:void 0,selectedChannelDisplayName:void 0}},computed:{chatClient:function(){return this.$store.getters.getChatClient}},methods:{getChannels:function(){var e=this;this.chatClient.getSubscribedChannels().then((function(t){e.channels=t.items}))},getChannelDisplayName:function(e){var t=e.attributes.displayNames;return t[0]==this.user.name?t[1]:t[0]},onSelectedChannel:function(e){this.selectedChannel=e.channel,this.selectedChannelDisplayName=e.channelDisplayName}},created:function(){this.getChannels()}},rt=st,ct=Object(u["a"])(rt,Oe,Pe,!1,null,null,null),lt=ct.exports;d()(ct,{VCol:Y["a"],VRow:z["a"]});var ut=n("2f62"),ht=(n("d3b7"),{roles:void 0}),dt={getRoles:function(e){return e.roles}},pt={getRoles:function(e){var t=e.commit;return new Promise((function(e,n){V()({url:"https://covid-19-hackathon-app.herokuapp.com/role/",method:"GET"}).then((function(n){t("updateRoles",n.data.roles),e(n)})).catch((function(e){n(e)}))}))}},ft={updateRoles:function(e,t){e.roles=t}},mt={state:ht,getters:dt,actions:pt,mutations:ft},gt=(n("b680"),n("96cf"),n("1da1")),vt=n("14b7"),bt=n.n(vt),Ct={user:void 0,token:void 0,refresh:void 0,potentialNeighbors:void 0},wt={getUser:function(e){return e.user},isLoggedIn:function(e){return!!e.user},getToken:function(e){return e.token},getRefreshToken:function(e){return e.refreshToken},getPotentialNeighbors:function(e){return e.potentialNeighbors}},yt={signup:function(e,t){var n=e.commit;return new Promise((function(e,a){V()({url:"https://covid-19-hackathon-app.herokuapp.com/user/signup",data:t,method:"POST"}).then((function(t){n("updateUser",t.data.user),n("updateRefresh",t.data.refresh),n("updateToken",t.data.token),e(t)})).catch((function(e){a(e)}))}))},login:function(e,t){var n=e.commit;return new Promise((function(e,a){V()({url:"https://covid-19-hackathon-app.herokuapp.com/user/login",data:t,method:"POST"}).then((function(t){n("updateUser",t.data.user),n("updateRefresh",t.data.refresh),n("updateToken",t.data.token),e(t)})).catch((function(e){a(e)}))}))},logout:function(e){var t=e.commit;localStorage.removeItem("user"),t("logout")},fetchUser:function(e){var t=e.commit,n=JSON.parse(localStorage.getItem("user"));n||(n=void 0),t("updateUser",n)},updateUser:function(e,t){var n=e.commit;n("updateUser",t)},updateLocation:function(e,t){var n=e.commit,a={latitude:t.latitude,longitude:t.longitude};return new Promise((function(e,t){V()({url:"https://covid-19-hackathon-app.herokuapp.com/user/"+Ct.user.id,data:a,method:"PATCH"}).then((function(t){n("updateUser",t.data),e(t)})).catch((function(e){t(e)}))}))},fetchPotentialNeighbors:function(e){var t=e.commit;V()({url:"https://covid-19-hackathon-app.herokuapp.com/user/nearby/"+Ct.user.id,method:"GET"}).then((function(e){t("updatePotentialNeighbors",e.data)})).catch((function(e){console.log(e)}))}},kt={updateUser:function(e,t){e.user=t,e.user&&localStorage.setItem("user",JSON.stringify(t))},updatePotentialNeighbors:function(e,t){e.potentialNeighbors=t},logout:function(e){e.user=void 0,e.potentialNeighbors=void 0},updateToken:function(e,t){e.token=t,It()},updateRefresh:function(e,t){e.refresh=t}},Nt=null;function xt(){return bt.a.decode(At.getters["getToken"]).exp-240<=(Date.now()/1e3).toFixed(0)?(null===Nt&&(console.log("in refresh token block"),Nt=V()({url:"https://covid-19-hackathon-app.herokuapp.com/refresh-token",data:{},method:"GET",config:{withCredentials:!0}}).then((function(e){return _t(),At.commit("updateRefresh",e.data.access_token),e.data.access_token}))),Nt):At.getters["getToken"]}function _t(){Nt=null}function It(){V.a.interceptors.request.use(function(){var e=Object(gt["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.url.includes("login")||t.url.includes("refresh-token")||t.url.includes("signup")){e.next=7;break}return e.next=3,xt();case 3:e.t0=e.sent,t.headers["Authorization"]="Bearer "+e.t0,e.next=9;break;case 7:console.log("Used refresh token for "+t.url),t.headers["Authorization"]="Bearer "+At.getters["getRefreshToken"];case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return console.log("Error in interceptor"+e),Promise.reject(e)})),V.a.interceptors.response.use((function(e){return e}),(function(e){if(console.log("Error in interceptor"+e),void 0!==e.request&&e.request.responseURL.includes("login"))return Promise.reject(e);if(void 0!==e.request&&(e.request.responseURL.includes("refresh")||401===e.request.status&&e.config.__isRetryRequest))At.dispatch("logout"),qt.push({name:"Login"});else if(void 0!==e.request&&401===e.request.status)return e.config.__isRetryRequest=!0,V.a.request(e.config);return Promise.reject(e)}))}var Ot={state:Ct,getters:wt,actions:yt,mutations:kt},Pt=(n("c975"),n("a434"),n("dd8f")),Tt={chatClient:void 0,newInvitations:[]},jt={getChatClient:function(e){return e.chatClient},getNewInvitations:function(e){return e.newInvitations}},St={createChatClient:function(e,t){var n=this,a=e.commit;Pt.Client.create(t).then((function(e){e.on("channelInvited",(function(e){e.join(),a("addNewInvitation",e.uniqueName)})),a("updateChatClient",e)})).catch((function(e){console.log(e),n._vm.$toasted.show(e.message)}))}},Mt={updateChatClient:function(e,t){e.chatClient=t},addNewInvitation:function(e,t){e.newInvitations.push(t)},removeNewInvitation:function(e,t){var n=e.newInvitations.indexOf(t);-1!==n&&e.newInvitations.splice(n,1)}},Et={state:Tt,getters:jt,actions:St,mutations:Mt};a["a"].use(ut["a"]);var At=new ut["a"].Store({modules:{role:mt,user:Ot,twilio:Et}});a["a"].use(S["a"]);var Vt=[{path:"/",name:"Home",component:G,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:pe,meta:{noToken:!0}},{path:"/signup",name:"Signup",component:Ie,meta:{noToken:!0}},{path:"/chat",name:"Chat",component:lt,meta:{requiresAuth:!0}}],Ut=new S["a"]({mode:"history",base:"/neighbor/",routes:Vt});Ut.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.requiresAuth}))?void 0==At.getters.getUser?n({path:"/login",params:{nextUrl:e.fullPath}}):n():e.matched.some((function(e){return e.meta.noToken}))?(At.dispatch("fetchUser"),void 0==At.getters.getUser?n():n({name:"Home"})):n()}));var qt=Ut,Ft=n("f3091"),Lt=n("fcf4");n("5363");a["a"].use(Ft["a"]);var Bt=new Ft["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#ff0000",background:Lt["a"].white}}},icons:{iconfont:"mdi"}}),$t=n("a65d"),Rt=n.n($t),Dt={position:"bottom-right",theme:"bubble",duration:3e3,keepOnHover:!0};a["a"].use(Rt.a,Dt),a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(j)},vuetify:Bt,router:qt,store:At}).$mount("#app")},5756:function(e,t,n){},6:function(e,t){},"729b":function(e,t,n){},8254:function(e,t,n){"use strict";var a=n("e2ff"),o=n.n(a);o.a},"8a23":function(e,t,n){},"8bab":function(e,t,n){"use strict";var a=n("c008"),o=n.n(a);o.a},"8baf":function(e,t,n){"use strict";var a=n("729b"),o=n.n(a);o.a},"939e":function(e,t,n){},"9a81":function(e,t,n){"use strict";var a=n("5756"),o=n.n(a);o.a},b223:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAyCAYAAAC+jCIaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABTZJREFUeNrsXO914jAMd3v9nm4QNkg2CJ2AdoJwEzBCbgOuE8BNQDsBdILQCaAf71NgAi5cldbn8x/JCQ686veeXgt1bFn+WZEUp0IwGAwGg8FgMBgMBoPBYDAYDMYXxTfP64padrX8ZhMyusKslkMtVS0Jm4PRBXIg1YHJxbDhikiqueb7bS1pLfvQytfMjuofT7UM4aunekIPgYaf1HILv69reW7Z3wjsKCDMePyKnup4O9xIn0vxvsihiTWr5aBIEW74D1l20N9S6fOica35LpNE56l2IDKOO23VA7kGmu+GfCM6P2TKrimUzy4pA3ushcZjzdhjnT+xfGQWkFhJLZVEquPvMROrf9ycoM8x/PweIPN4Pbzfhu/hq/lVmCQiFozOPNYG4q1IyWSWfXuuM7ATeyyHx7o1tFuBV1C9wTPIQvIasuc6XvcLsfvvIQEYSOn7GkoJe8T1AymxeHW0j0C3Icx3B3rOpbFiJTF4Ido1kfpfwVx8PKmqq5D68ylvmGy9QvZns3UGuh71fFCNURk8VYQY0OTpcovRZo54rQKv2NVOzw1zbMZqdF0of8uQHitRyjCyTInzyCy6NuuSEQiFsfXEw9aRbQ0SyyRyT1du6yOGDBKbEOQdECsnjLX0INaoZWKz8UyWcoT3rDpKvlS7RIa+nQNXBDdbaK7VLU5kMOIGFDcRLmtBrMyy63VjVkRiVYTFyxFZZle2iQ16ldCficwF0tam6//C5jkWLYhVCP0D66lmUTKER1sidzqmje4WGxMWLrNsxCn8fWS4/SwIxMLaZoMkQqnJaDPDvBPCXamCeRXy7TSCjkvNohctiRXBgIklFkssMZhKiBixIBhvlVnGLD2JZXogXyB0FIT+TLbJHTraYmVdfzMksWa2GDwCKTomlooJsSShtp94EGtKHDPzJJYtSTloYhPXPFy2zx2ecEGMxUYIPXUe0FpuCHUyQS1JrAmZjRCfT/9Fi2ueHO1fQC/qWKZ+9wadXCWMOXG8e8dnV9nnWG7YKmUWVU+1HPUzZOXdhgFWMeT1PsRaIa6hEmvr2JxbD93fHH/fa/SM4brYY85Nu7H0eagQK9XMS4vrnokVArcIDyKwBvNsT533GtluZxjH187brox+I/rF6sTtLxWDS59AaGKpt4S7AGOabhcUL3fbs5fFttsZPE/qSei17wSueyCWml2FIJZQ4gZqkpH2sOldtok0er1K8dlOISDG1umlEkvNZMYI4xWS+JxQXRHHHJ3JrWhMJP/K8fkHgsipQqq3riZz6jqWrqZjq/+oxUqfAukRuuJfZCCV7hFIoVkEyrEZTIGW+gBfndPEoaOthocpuGLn0QuxjpgK/ZP/RFngUuBOB2CIpSv+bcDQBfRte7TVF7GasWXb5EL/iEq3UXSV8uaBeVMU1/VXtphHb8SKBO1kg+stIAyxhPi/ik+RPohFsdGE4IlcUgnzCVk0sULHWE0daUgIDNcQb7R9OvAI/ewc7eZtgtYOgbXRXJjfQdxD3ESxddplbGXa1ZMTX1sI+5EdTMBeCdoxnwh0WyrXLsTniQfXeaxE0E6BqHNMkPOwHYbcCPchSNXWG0tfVFvbDhCQ3oQ+dWqdin+P3770qM9B4z361CcG+6Qd2CcRn0eTt+ClXgUjyCJi4zaGATdfZJ6J5A1dL1yMHbU3BuMDC2Q9J2+TUjPOL8YK4bHUzGgL3qjJEu+F/ojNHdOEYQP2LZ1e/4MO4zIxEri3aZZMKgYVpjpWCbEXx1QMBoPBYDAYjLPEHwEGAMegFLfNUdqKAAAAAElFTkSuQmCC"},b25e:function(e,t,n){"use strict";var a=n("17b6"),o=n.n(a);o.a},c008:function(e,t,n){},c463:function(e,t,n){"use strict";var a=n("01ea"),o=n.n(a);o.a},cccb:function(e,t,n){"use strict";var a=n("4230"),o=n.n(a);o.a},d504:function(e,t,n){},d86d:function(e,t,n){},da83:function(e,t,n){"use strict";var a=n("939e"),o=n.n(a);o.a},e2ff:function(e,t,n){}});
//# sourceMappingURL=app.f5b445cb.js.map